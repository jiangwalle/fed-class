<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
  <script>
    // 1. Callback
    // 霓虹灯：7种颜色，每种显示1秒
    // function displayColorFor1S(color, callbackFunc) {
    //   setTimeout(() => {
    //     document.body.style.backgroundColor = color;
    //     // console.log(`Change color to ${color}`);

    //     if (callbackFunc) {
    //       callbackFunc();
    //     }
    //   }, 1000);
    // }


    // function eat(func) {
    //   // need very long time
    //   console.log(`Start eating...`);
    //   setTimeout(() => {
    //     console.log(`Finish eating`);

    //     func();
    //   }, 10000);
    // }

    // function walk() {
    //   console.log(`Walking after dinner`);
    // }

    // eat(walk);
    // walk();

    // (red, orange, yellow, green, blue, indigo, violet)
    // console.log(`start`);
    // displayColorFor1S('red');
    // displayColorFor1S('orange');
    // displayColorFor1S('yellow');
    // console.log(`end`);
    // displayColorFor1S('red', () => {
    //   displayColorFor1S('orange', () => {
    //     displayColorFor1S('yellow', () => {
    //       displayColorFor1S('green', () => {
    //         displayColorFor1S('blue', () => {
    //           displayColorFor1S('indigo', () => {
    //             displayColorFor1S('violet');
    //           })
    //         })  
    //       })
    //     })
    //   });
    // });

    // Fake API request
    // const fakeRequestCallback = (url, success, fail) => {
    //   const delay = Math.floor(Math.random() * 4000);
    //     console.log(`delay is: ${delay}`);
    //     setTimeout(() => {
    //       if (delay > 3000) {
    //         fail(`API Error: connection timeout for request param ${url}.`);
    //       } else {
    //         success(`Server response fake data for request param ${url}.`);
    //       }
    //     }, delay);
    // }

    // fakeRequestCallback('/orders/page/1',
    //   function(response) {
    //     console.log(response);

    //     fakeRequestCallback('/orders/page/2',
    //       function(response) {
    //         console.log(response);

    //         fakeRequestCallback('/orders/page/3',
    //           function(response) {
    //             console.log(response);
    //           },
    //           function(error) {
    //             console.log(error);
    //           });
    //       },
    //       function(error) {
    //         console.log(error);
    //       })
    //   },
    //   function(error) {
    //     console.log(error);
    //   });

    // const fakeRequestPromise = (url) => {
    //   return new Promise((resolve, reject) => {
    //     const delay = Math.floor(Math.random() * 4000);
    //     console.log(`delay is: ${delay}`);
    //     setTimeout(() => {
    //       if (delay > 3000) {
    //         reject(`API Error: connection timeout for request param ${url}.`);
    //       } else {
    //         resolve(`Server response fake data for request param ${url}.`);
    //       }
    //     }, delay);
    //   });
    // }

    // fakeRequestPromise('/orders/page/1')
    //   .then((data) => {
    //     console.log(data);
    //     return fakeRequestPromise('/orders/page/2');
    //   })
    //   .then(data => {
    //     console.log(data);
    //     return fakeRequestPromise('/orders/page/3');
    //   })
    //   .then(data => {
    //     console.log(data);
    //   })
    //   .catch(error => {
    //     console.log(error);
    //   });

    // async function requestOrdersData() {
    //   try {
    //     const data1 = await fakeRequestPromise('/orders/page/1');
    //     console.log(data1);

    //     const data2 = await fakeRequestPromise('/orders/page/2');
    //     console.log(data2);

    //     const data3 = await fakeRequestPromise('/orders/page/3');
    //     console.log(data3);

    //     const data4 = await fakeRequestPromise('/orders/page/4');
    //     console.log(data4);
    //   } catch (error) {
    //     console.log(`Catched error: `, error);
    //   }
    // }

    // requestOrdersData();

    // const fakeLogin = (username, password) => {
    //   console.log(`Start API call for login`);

    //   return new Promise(function(resolve, reject) {
    //     setTimeout(() => {
    //       console.log(`5 seconds passed and server returned`);

    //       if (username === 'admin' && password === '123456') {
    //         resolve('Yay, succeed');
    //       } else {
    //         reject('Ooops, invalid username or password');
    //       }
    //     }, 5000);
    //   });
    // }

    // fakeLogin('admin', '123456f')
    //   .then((data) => {
    //     console.log(`Login response data: `, data);
    //   })
    //   .catch((error) => {
    //     console.log(`Login error response: `, error);
    //   });

    // async function greeting() {
    //   setTimeout(() => {
    //     return 'hello';
    //   }, 2000);
    // }

    // async function print() {
    //   console.log(`Start`);
    //   const msg = await greeting();
    //   console.log(msg);
    //   console.log(`End`);
    // }


    // Use axios to get API data
    async function searchMovie(searchTerm) {
      return await axios.get(`https://api.themoviedb.org/3/search/movie?api_key=71b734c9fe036fa5b36e3d80555e9e37&language=en-US&page=1&include_adult=false&query=${encodeURIComponent(searchTerm)}`);
    }

    async function handleSearch() {
      // get search term from input box

      const res = searchMovie(term);

      // process res and show image and title to DOM
    }

    

  </script>
</body>
</html>